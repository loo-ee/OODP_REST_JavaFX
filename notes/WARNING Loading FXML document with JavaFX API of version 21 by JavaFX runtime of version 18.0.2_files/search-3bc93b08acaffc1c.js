(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(97325)}])},99687:function(e,s,t){"use strict";var n=t(85893),l=t(33299),a=t(41664),r=t.n(a),o=t(78543),c=t(65629);s.Z=function(e){let{answerModel:s,setAnswerModel:t,requestsLeftForGPT4:a,session:i,useCreativeMode:d,setUseCreativeMode:m}=e;return(0,n.jsx)("div",{className:"form-check form-switch",children:(0,n.jsxs)("div",{className:"dropdown",children:[(0,n.jsxs)("button",{className:"btn p-0 fs-6 fw-bold text-dark text-decoration-underline' dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[s,(0,n.jsx)("i",{className:"mx-1 fe fe-chevron-down text-black"})]}),(0,n.jsxs)("ul",{className:"dropdown-menu",children:[(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("button",{className:"mx-1 dropdown-item d-flex align-items-center justify-content-between",type:"button",onClick:()=>{t("Phind Model")},children:["Phind Model","Phind Model"===s&&(0,n.jsx)("i",{className:"mx-1 fe fe-check text-always-dark"})]})})}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("button",{className:"mx-1 dropdown-item d-flex align-items-center justify-content-between",type:"button",onClick:()=>{t("GPT-4")},children:["GPT-4","GPT-4"===s&&(0,n.jsx)("i",{className:"mx-1 fe fe-check text-always-dark"})]})})}),(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("p",{className:"p-1 mt-5 mb-0 fs-6",children:[(0,n.jsxs)("span",{className:"text-primary",children:[Math.max(a,0)," ","GPT-4 uses left",i&&" today","."]}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{className:"text-always-dark",children:"Phind Model has unlimited uses."}),!i&&a<=0&&(0,n.jsx)("button",{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",onClick:()=>{(0,l.signIn)().then(()=>{o.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses."}),i&&a<=0&&(0,n.jsx)(r(),{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",href:"/plans",children:"Upgrade for more daily GPT-4 model uses."})]})}),(0,n.jsx)("div",{className:"row",children:(0,n.jsx)(c.Z,{message:"Forces the model to answer without considering search results.",children:(0,n.jsx)("div",{className:"form-check form-switch mt-5",children:(0,n.jsxs)("label",{className:"form-check-label fs-6 fw-bold",htmlFor:"Creative mode",children:["Ignore search results",(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"Creative Mode",checked:d,onChange:()=>{m(!d),o.n.track("Click Checkbox",{name:"Use creative mode",checked:d})}})]})})})})]})]})]})})}},97325:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return V},default:function(){return z}});var n=t(85893),l=t(67294),a=t(9008),r=t.n(a),o=t(11163),c=t(41664),i=t.n(c),d=t(76812),m=t(66261),u=t(33299),h=t(92981),x=t(37870),p=t(96769),w=t(3176),b=t(78543),f=t(38323),j=t(82010),g=t(30399),N=t(11319),v=t(29758),k=t(12372),y=t(92929);let C=(0,n.jsxs)("p",{className:"placeholder-glow",children:[(0,n.jsx)("span",{className:"placeholder placeholder-sm col-12 "}),(0,n.jsx)("span",{className:"placeholder placeholder-sm col-12"}),(0,n.jsx)("span",{className:"placeholder placeholder-sm col-8"})]}),S={strict:!1,output:"mathml"},P=(0,l.memo)(function(e){let{markdown:s}=e,{theme:t,setTheme:l,resolvedTheme:a}=(0,j.F)(),r={backgroundColor:k.L5,padding:"3px",borderRadius:"8px",color:"white",cursor:"pointer"},o={backgroundColor:"white",padding:"3px",borderRadius:"8px",color:"black",cursor:"pointer"};return(0,n.jsx)(f.D,{remarkPlugins:[g.Z,v.Z],rehypePlugins:[N.Z,[N.Z,S]],className:"fs-5",components:{p:e=>{let{node:s,...t}=e;return(0,n.jsx)("p",{className:"text-black mb-3",...t})},ul:e=>{let{node:s,...t}=e,l={...t,ordered:"false"};return(0,n.jsx)("ul",{className:"mb-3",...l})},ol:e=>{let{node:s,...t}=e,l={...t,ordered:"true"};return(0,n.jsx)("ol",{className:"mb-2",...l})},a:e=>{let{node:s,...t}=e,{children:l}=t;return(0,n.jsx)("a",{target:"_blank",...t,children:l})},code(e){let{node:s,inline:t,className:l,children:c,style:i,...d}=e;return t?(0,n.jsx)("code",{onClick:()=>{navigator.clipboard.writeText(String(c))},className:l,style:"dark"===a?o:r,...d,children:c}):(0,n.jsx)(y.Z,{highlighterProps:d,url:"",className:l,children:String(c)})}},children:s})}),T=e=>(0,n.jsxs)("p",{children:["The inference service may be temporarily unavailable - we have alerts for this and will be fixing it soon.",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"You can try the regenerate button in a few moments.",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"If your query still does not work, you can try searching this on"," ",(0,n.jsx)("a",{href:"https://www.google.com/search?q=".concat(encodeURIComponent(e)),children:"Google"})," ","or"," ",(0,n.jsx)("a",{href:"https://www.duckduckgo.com?q=".concat(encodeURIComponent(e)),children:"DuckDuckGo"}),".",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"You can also prefix your question with !g or !ddg"," ",(0,n.jsx)(i(),{href:"/bangs",children:"shortcuts"}),". You may have to enable popups for this to work."]});var Z=function(e){var s;let{question:t,waitingForStreamStart:l,answer:a,searchResults:r,doneStreaming:o,metadata:c}=e,i={},d=null==c?void 0:c.model_name,m=null==c?void 0:c.mode;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h6",{className:"text-uppercase mt-1",children:d?"Answer  | ".concat(d," Model ").concat(void 0!==m&&"Normal"!==m?"| ".concat(m):""):"Answer"}),l&&C,!l&&(null!==(s=(e=>{if(!e)return null;let s=r.map(e=>e.url),t=e;t=(0,p.Yg)(t,s);for(let e=0;e<15;e+=1)t.includes("[".concat(e,"]"))&&r&&(i[e]=r[e].url);return(t=(t=t.replace(p.V7,(e,s)=>{if(r){var t;let e=null===(t=r[s])||void 0===t?void 0:t.url,n=e?new URL(e):null,l=n?n.hostname.replace("www.","").replace("https://","").replace("http://","").split("/")[0]:"";return"".concat(l)}return""})).replace(/\$\d+(?!\$)/g,e=>e.replace("$","\\$"))).split("```").map((e,s)=>s%2!=0?(0,n.jsx)(P,{markdown:"```".concat(e,"```")},s):e.trimStart().split("\n\n").map((e,s)=>(0,n.jsx)(P,{markdown:e},e)))})(a))&&void 0!==s?s:T(t))]}),(0,n.jsx)("div",{className:"position-relative mt-4",children:Object.keys(i).length>0&&o&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h6",{className:"text-uppercase",children:"Citations"}),(0,n.jsx)("div",{className:"mb-3",children:Object.keys(i).map(e=>(0,n.jsx)("a",{href:i[e],target:"_blank",rel:"noreferrer",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start",children:"[".concat(e,"] ").concat(i[e].replace("www.","").replace("https://","").replace("http://","").split("/")[0])},e))})]})})]})},A=t(60161),M=function(e){let{pageIndex:s,setPageIndex:t,numPages:l}=e,a=Array.from(Array(l).keys());return(0,n.jsx)("ul",{className:"pagination",children:a.map((e,l)=>(0,n.jsx)("li",{className:"page-item ".concat(s===l?"active":""),children:(0,n.jsx)("button",{className:"page-link btn-light",onClick:()=>t(l),type:"button",children:l+1})},l))})},I=t(65629);let q=Array.from([,,,,,].keys()).map(e=>(0,n.jsxs)("div",{className:"mb-6 placeholder-glow",children:[(0,n.jsx)("span",{className:"placeholder placeholder-sm col-6"}),(0,n.jsx)("span",{className:"placeholder placeholder-sm col-11"}),(0,n.jsx)("span",{className:"placeholder placeholder-sm col-10"})]},"placeholder ".concat(e)));var F=function(e){var s,t;let{searchResults:a,loading:r,openLinksInNewTab:o,customLinks:c,beginEditQuery:d}=e,[m,u]=(0,l.useState)(0),h=[];for(let e=0;e<a.length;e+=5)h.push(a.slice(e,e+5));if(c.length>0){let e=c.map((e,s)=>({title:"Custom Link ".concat(s),url:e,description:"Your custom link."}));h=[e,...h]}return(0,n.jsxs)("div",{className:"position-relative",children:[(0,n.jsx)("h6",{className:"text-uppercase d-inline",children:"Sources"}),(0,n.jsx)(I.Z,{message:"Edit Query",children:(0,n.jsx)("button",{type:"button",className:"btn btn-sm p-1",onClick:d,children:(0,n.jsx)("i",{className:"fe fe-edit text-black"})})}),(0,n.jsx)(I.Z,{message:"Filter Sources",children:(0,n.jsx)(i(),{href:"/filters",className:"text-dark",children:(0,n.jsx)("button",{type:"button",className:"btn btn-sm p-1",children:(0,n.jsx)("i",{className:"fe fe-filter text-black"})})})}),r&&q,!r&&!(null==h?void 0:h.length)&&(0,n.jsx)("p",{children:"There were no search results found."}),m<h.length&&(null===(s=h[m])||void 0===s?void 0:s.map((e,s)=>!function(e){try{return new URL(e),!0}catch(e){return!1}}(e.url)?null:(0,n.jsx)("div",{children:(0,n.jsx)(A.Z,{openLinksInNewTab:o,index:s,webResult:e})},e.url))),!r&&(0,n.jsx)("div",{className:"row mt-2",children:(0,n.jsx)("div",{className:"col-6",children:(0,n.jsx)(M,{pageIndex:m,setPageIndex:u,numPages:null!==(t=null==h?void 0:h.length)&&void 0!==t?t:0})})})]})},E=t(91745),G=t(93680),L=t(11676),R=t(99017),D=function(e){let{show:s,setShow:t,sendFeedback:l,currentFeedback:a}=e,r=()=>t(!1),o=e=>{let s={helpful:a};for(let t=0;t<e.target.elements.length;t+=1)"checkbox"===e.target.elements[t].type&&(s[e.target.elements[t].id]=e.target.elements[t].checked),"textarea"===e.target.elements[t].type&&(s.comment=e.target.elements[t].value);l(s,"Feedback Form"),r(),e.preventDefault()};return(0,n.jsx)(R.Z,{show:s,onHide:r,children:(0,n.jsxs)(R.Z.Body,{className:"bg-light",children:[(0,n.jsx)(R.Z.Title,{className:"mb-5",children:"Additional Feedback"}),(0,n.jsxs)(L.Z,{onSubmit:o,children:[(0,n.jsxs)(L.Z.Group,{className:"m-1 mb-5",controlId:"exampleForm.ControlTextarea1",children:[(0,n.jsx)(L.Z.Label,{children:!1===a?"What was the issue? How can it be improved?":"What do you like about the response?"}),(0,n.jsx)(L.Z.Control,{className:"bg-white",as:"textarea",type:"textarea",rows:3})]}),!1===a&&(0,n.jsxs)(L.Z.Group,{className:"m-1 mb-5",controlId:"formBasicCheckbox",children:[(0,n.jsx)(L.Z.Check,{type:"checkbox",label:"Answer isn't true",id:"inaccurate"}),(0,n.jsx)(L.Z.Check,{type:"checkbox",label:"Answer is incomplete",id:"tooShort"}),(0,n.jsx)(L.Z.Check,{type:"checkbox",label:"I waited too long",id:"tooSlow"})]}),(0,n.jsx)(G.Z,{className:"m-1",variant:"secondary",onClick:r,children:"Close"}),(0,n.jsx)(G.Z,{className:"m-1",variant:"primary",type:"submit",children:"Submit"})]})]})})},_=t(48684),Q=function(e){let{sendFeedback:s}=e,{isXs:t}=(0,_.k)();return(0,n.jsx)("div",{className:"alert bg-light alert-dismissible fade show p-3",role:"alert",children:(0,n.jsxs)("div",{className:t?"container justify-content-center d-flex text-center":"container d-flex",style:t?{flexWrap:"wrap"}:{},children:[(0,n.jsx)("div",{className:"flex-grow-1 align-self-center",children:(0,n.jsx)("strong",{children:"Was this response better or worse?"})}),(0,n.jsxs)("div",{className:t?"row":"",children:[(0,n.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>s("better"),type:"button",children:[(0,n.jsx)("i",{className:"fe fe-thumbs-up m-2"}),"Better"]}),(0,n.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>s("worse"),type:"button",children:[(0,n.jsx)("i",{className:"fe fe-thumbs-down m-2"}),"Worse"]}),(0,n.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>s("same"),type:"button",children:[(0,n.jsx)("i",{className:"fe fe-minus-circle m-2"}),"Same"]})]})]})})},U=t(27052),H=function(e){let{suggestedFollowups:s,customSearchHandler:t}=e,l=async(e,s)=>{e.preventDefault(),t&&t(s,""),b.n.track("Click Suggested Followup",{prompt:s})};return(0,n.jsx)("div",{className:"my-5",children:!!(null==s?void 0:s.length)&&s.map(e=>(0,n.jsx)("a",{onClick:s=>l(s,e),children:(0,n.jsx)("button",{type:"button",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start",children:e})},e))})},O=t(99687),W=t(35572),Y=t(81794),B=t(5352),$=(0,l.memo)(function(e){let{regenerateAnswer:s,answerIndex:t,requestsLeftForGPT4:l,session:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"button",className:"btn btn-light btn-sm dropdown dropdown-toggle m-1","data-bs-toggle":"dropdown","aria-expanded":"false",children:[(0,n.jsx)("i",{className:"fe fe-refresh-cw me-2"}),"Rewrite"]}),(0,n.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,n.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" Rewrite your answer "}),(0,n.jsx)("li",{children:(0,n.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{s(t,void 0,void 0,"Phind Model")},children:"Use Phind Model"})}),(0,n.jsx)("li",{children:(0,n.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{s(t,void 0,void 0,"GPT-4")},children:"Use GPT-4"})}),(0,n.jsx)("li",{children:(0,n.jsxs)("p",{className:"mt-5 mb-0 fs-6",children:[(0,n.jsxs)("span",{className:"text-primary",children:[Math.max(l,0)," ","GPT-4 uses left",a&&" today","."]}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{className:"text-always-dark",children:"Phind Model has unlimited uses."}),!a&&l<=0&&(0,n.jsx)("button",{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",onClick:()=>{(0,u.signIn)().then(()=>{b.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses."}),a&&l<=0&&(0,n.jsx)(i(),{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",href:"/plans",children:"Upgrade for more daily GPT-4 model uses."})]})})]})]})});let K=(0,n.jsxs)("p",{className:"placeholder-glow",children:[(0,n.jsx)("span",{className:"placeholder placeholder-sm col-12 "}),(0,n.jsx)("span",{className:"placeholder placeholder-sm col-12"}),(0,n.jsx)("span",{className:"placeholder placeholder-sm col-8"})]}),X={cacheKey:"",question:"",searchQuery:"",searchResults:[],answer:"",context:"",previousAnswers:[],customLinks:[],metadata:{}};function J(e){var s,t,a,c;let{cachedAnswerHistory:f,numRequestsDone:j,phindPlan:g,paidPlanValid:N,anonUserId:v,cachedSuggestedFollowupQuestions:y,chatHistoryEnabled:C}=e,S=(0,o.useRouter)(),{query:{q:P,cache:T,fromExtension:A,source:M,c:q}}=S,{data:G}=(0,u.useSession)(),[L,R]=(0,l.useState)(!1);(0,l.useEffect)(()=>{R(!0)},[]);let[J,V]=(0,l.useState)(!1),z=(0,l.useRef)(new AbortController),{signal:ee}=z.current,[es,et]=(0,l.useState)(null!=f?f:[]),[en,el]=(0,l.useState)(null!=y?y:[]),ea=es.length,er=null==es?void 0:es.map(e=>e.question),eo=null==er?void 0:er[0],ec=null==es?void 0:null===(s=es[0])||void 0===s?void 0:s.context,ei=null==er?void 0:er.slice(-1)[0],ed=null===(t=null==es?void 0:es.slice(-1)[0])||void 0===t?void 0:t.context,em=es?es.map(e=>e.answer):[],[eu]=(0,E.Z)("userSearchRules",k.dJ),[eh,ex]=(0,E.Z)("numNotLoggedInRequestsDone",0),ep=100;L&&(G?ep=(0,p.N7)(g,N)-j:null===G&&(ep=k.BH-eh));let[ew,eb]=(0,E.Z)("answerModel",k.Wg),[ef,ej]=(0,E.Z)("useCreativeMode",!1),[eg,eN]=(0,E.Z)("usePairProgrammerMode",!1),ev=("Phind Pro"===g||"Phind Pro Yearly"===g)&&N,ek="Phind Model"===ew||"GPT-4"===ew&&ep<=0,ey=ev?k.CZ:k.M9,eC=ek?k.c5:ey,eS=!P&&!q&&!T&&window.localStorage,eP=eS&&localStorage.getItem("long-question")||"",eT=eS&&localStorage.getItem("long-context")||"",eZ=null!==(a=null!=P?P:eP)&&void 0!==a?a:"",eA=null!==(c=null!=q?q:eT)&&void 0!==c?c:"",[eM,eI]=(0,l.useState)(Array(ea).fill(!1)),[eq,eF]=(0,l.useState)(Array(ea).fill(!1)),[eE,eG]=(0,l.useState)(Array(ea).fill(!0)),[eL,eR]=(0,l.useState)(null),[eD,e_]=(0,l.useState)(!1),[eQ,eU]=(0,l.useState)(!1),[eH,eO]=(0,l.useState)(!1),[eW,eY]=(0,E.Z)("upgradeModalAllowed",!0),[eB,e$]=(0,l.useState)(Array(ea).fill(!1)),eK={},eX=new Date,eJ=eX.toLocaleDateString(),eV="";eV=window.navigator.language;let{isXs:ez}=(0,_.k)(),{isMd:e0}=(0,_.k)(),{isSm:e1}=(0,_.k)(),e6={date:eJ,language:eV,detailed:!0,anonUserId:v,answerModel:ew,creativeMode:ef},e4=()=>{z.current.abort(),z.current=new AbortController};(0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&e4()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);let e2=async()=>{(null==window?void 0:window.confirm("Are you sure you want to remove your last answer?"))&&(b.n.track("Click Remove Last Answer",{answer:es[es.length-1]}),et(e=>e.slice(0,-1)))},e3=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"feedback",t={question:ei,context:ed,source:A?"extension":M,answerCount:es.length,options:e6,searchOptions:eK,phindPlan:g};b.n.track(s,{...t,...e})},e8=(e,s,t,n)=>{if(e>=es.length){console.error("Answer index out of bounds");return}let l=es[e],a=s||ei;b.n.track("Regenerate Answer",{question:a,previousAnswerData:l,answerIndex:e});let{searchResults:r}=l,o=r;t&&r&&(o=r.filter((e,s)=>t[s]));let{previousAnswers:c}=l,i=(0,p.N6)(es,e,{...l,searchResults:o,question:a,previousAnswers:[...c,l.answer]});et(i);let d={...e6,regenerate:!0};n&&(d={...d,answerModel:n}),sl(e,i,d),(null==l?void 0:l.answer)&&eU(!0)},[e5,e9]=(0,l.useState)(!1),e7=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ea,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e5)return;e9(!0);let a={...X,question:e,context:s};et(e=>(0,p.N6)(e,t,a)),eI(e=>(0,p.N6)(e,t,!0)),eF(e=>(0,p.N6)(e,t,!0));let{query:r}=await(0,w.rm)("".concat(e,"\n").concat(s),er.slice(0,t),em.slice(0,t)).catch(s=>(console.error(s),{query:e}));m.OK.scrollTo("answer-".concat(t),{duration:650,delay:0,smooth:"easeInOutQuart"}),st(t,e,s,r,n,l),e9(!1)};(0,l.useEffect)(()=>{0===ep&&eW&&!eH&&"GPT-4"===ew&&L&&eO(!0)},[ep,L]),(0,l.useEffect)(()=>{if(!L||!window.localStorage||!S||!S.isReady||T)return;if(!eZ){console.error("router is ready but q empty"),S.push("/");return}let e=ev?k.CZ:k.M9,s=eZ;(0,p.In)(eZ,ew)>e&&(s=(0,p.yF)(eZ,e,ew));let t={...X,question:s,context:eA};et(e=>(0,p.N6)(e,0,t)),eI(e=>(0,p.N6)(e,0,!0)),eF(e=>(0,p.N6)(e,0,!0)),(0,w.rm)("".concat(s,"\n").concat(eA),[],[]).then(e=>{let{query:n}=e;et(e=>(0,p.N6)(e,0,{...t,searchQuery:n})),st(0,s,eA,n)}).catch(e=>{console.error(e),st(0,s,eA,s)})},[P,S,L]);let[se,ss]=(0,l.useState)(!1),st=function(e,s,t,n){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(""===s)return;let r=[],o=s.match(/(?:^|\s)(https?:\/\/\S+)(?:\s|$)/g);o&&o.forEach(e=>{let s=e.trim();!(s.includes("127.0.0")||s.includes("localhost"))&&(r.includes(s)||r.push(s))});let c=(0,p.hC)(s);ss(c);let i=(0,p.xs)(s);if(i){window.open(i,"_self","noopener,noreferrer");return}let d={...X,question:s,searchQuery:n,context:t};et(s=>(0,p.N6)(s,e,d)),eI(s=>(0,p.N6)(s,e,!0)),eF(s=>(0,p.N6)(s,e,!0)),(0,w.xq)(n,eu,eV).then(s=>{if(eI(s=>(0,p.N6)(s,e,!1)),!s||s.length<=0)return;let t={...d,searchResults:s,customLinks:r},n=(0,p.N6)(es,e,t);et(n),l&&et(e=>e.slice(0,a+1));let o={...e6,customLinks:r};c||sl(e,n,o,l,a)})},sn=e=>{let{answer:s}=es[e],t=(0,p.N6)(eB,e,!0);e$(t),b.n.track("Click Copy Answer",{answer:s}),navigator.clipboard.writeText(s)},sl=function(e,s){let t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e6,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!1===eE[e]){console.warn("Did not start new stream as previous stream is still running.");return}let r=-1,o=Date.now();eF(s=>(0,p.N6)(s,e,!0)),eG(s=>(0,p.N6)(s,e,!1)),eR(null);let{question:c,searchResults:i,context:m,searchQuery:u}=s[e];if(e>=1){let l=s.slice(0,e).map(e=>"".concat(e.question,"\n").concat(e.context)),a=s.slice(0,e).map(e=>e.answer);t=(0,w.iK)(c,l,a,i,m,n,u)}else t=(0,w.tA)(c,i,m,n);G||"GPT-4"!==ew||ex(e=>e+1),t.then(async t=>{let n="",c={},i=(0,d.j)(s=>{if("event"===s.type){let{data:t}=s;if(t.includes("<PHIND_METADATA>")){let s=t.replace("<PHIND_METADATA>","").replace("</PHIND_METADATA>",""),n=JSON.parse(s);c={...c,...n},et(s=>(0,p.N6)(s,e,{...s[e],metadata:{...s[e].metadata,...n}}))}else eF(s=>(0,p.N6)(s,e,!1)),n+=t,et(s=>(0,p.N6)(s,e,{...s[e],answer:n})),-1===r&&(r=Date.now())}}),m=t.body,u=(0,p.Mz)(m,ee);for await(let e of(0,p.Uj)(u)){let s=new TextDecoder().decode(e);i.feed(s)}eG(s=>(0,p.N6)(s,e,!0));let x=null!=T?T:(0,h.Mc)(),w=s;l&&(w=s.slice(0,a+1));let b={...w[e],cacheKey:x,answer:n,metadata:c},f=(0,p.N6)(w,e,b);et(f),sa(e,f,o,r)}).catch(s=>{console.error(s),eF(s=>(0,p.N6)(s,e,!1)),eG(s=>(0,p.N6)(s,e,!0))})},sa=(e,s,t,n)=>{var l,a;let{cacheKey:r}=s[e],o="".concat(window.location.origin).concat("/search?cache=".concat(r)),{question:c,answer:i,context:d}=s[e];(null==G?void 0:null===(l=G.user)||void 0===l?void 0:l.userId)&&b.n.identify(null==G?void 0:null===(a=G.user)||void 0===a?void 0:a.userId);let m=(0,p.In)(c,ew),u=(0,p.In)(d,ew),h=(0,p.In)(i,ew),x=Date.now();e3({answerIndex:e,answer:i,newCachedUrlLink:o,question:c,context:d,questionLength:c.length,answerLength:i.length,contextLength:d.length,combinedQuestionContextLength:c.length+d.length,questionTokens:m,contextTokens:u,combinedQuestionContextTokens:m+u,answerTokens:h,startWaitingForAnswerTime:t,answerBeginGenerationTime:n,answerFinishTime:x,timeToFirstToken:n-t,timeToAnswer:x-t,timeFirstToLastToken:x-n,tokensPerSecond:h/((x-n)/1e3)},"search"),(0,w.De)(c,i).then(async e=>{e&&el(e)}),C&&(0,w.Qc)("".concat(r),c,s).then(()=>{S.replace({pathname:"/search",query:{cache:r}},void 0,{scroll:!1,shallow:!0})})},[sr,so]=(0,l.useState)(Array(ea).fill(!1)),[sc,si]=(0,l.useState)(Array(ea).fill(!1)),[sd,sm]=(0,l.useState)(!1);return L?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r(),{children:(0,n.jsx)("title",{children:ei})}),(0,n.jsx)(D,{show:eD,setShow:e_,sendFeedback:e3,currentFeedback:eL}),(0,n.jsx)(W.Z,{show:eH,setShow:eO,setShowUpgradeModalAllowed:eY,isLoggedIn:null!=G}),(0,n.jsx)(B.Z,{show:sd,setShow:sm}),(0,n.jsxs)("div",{className:"container-xl search-container",children:[(0,n.jsx)(Y.Z,{showChatHistoryModal:sd,setShowChatHistoryModal:sm}),(0,n.jsx)("div",{className:"row mt-6",children:(0,n.jsxs)("div",{className:"col-lg-8 col-xl-8",children:[(0,n.jsx)(x.Z,{placeholder:"",initialContext:ec||eA,initialQuestionFromCache:eo||eZ,defaultNumRowsToShow:1,customSearchHandler:eg?p.XD:void 0,answerModel:ew,maxTokenLimit:eC}),(0,n.jsxs)("div",{className:"mt-4",style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)(I.Z,{message:"Pair Programmer is more conversational and asks you clarification questions. It can be better for debugging.",children:(0,n.jsx)("div",{className:"form-check form-switch",children:(0,n.jsxs)("label",{className:"form-check-label fs-6 fw-bold",htmlFor:"Legacy Search",children:["Pair Programmer",(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"Pair Programmer",checked:eg,onChange:()=>{eN(!eg),b.n.track("Click Checkbox",{name:"Use Pair Programmer",checked:eg})}})]})})}),(0,n.jsx)(I.Z,{message:"Select your preferred answering model.",children:(0,n.jsx)(O.Z,{answerModel:ew,setAnswerModel:eb,requestsLeftForGPT4:ep,session:G,useCreativeMode:ef,setUseCreativeMode:ej})})]}),(0,n.jsx)("div",{children:ep<=0&&"GPT-4"===ew&&(G?(0,n.jsx)(I.Z,{message:"You get 10 free GPT-4 model uses each day. Upgrade for higher limits. You have unlimited fast model uses after your best model uses expire.",placement:"bottom",children:(0,n.jsx)(i(),{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",href:"/plans",children:"Upgrade for more daily GPT-4 uses"})}):(0,n.jsx)("button",{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",type:"button",onClick:()=>{(0,u.signIn)().then(()=>{b.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses"}))})]})}),es.map((e,s)=>{let{cacheKey:t,question:l,searchResults:a,answer:r,searchQuery:o,customLinks:c,metadata:i,context:d}=e,u="".concat(l," ").concat(t),h=s===es.length-1,w=l.length>150?"".concat(l.slice(0,150),"..."):l,f=()=>{eE[s]&&(b.n.track("Click Edit Query",{question:l,searchQuery:o,answerIndex:s}),si(e=>(0,p.N6)(e,s,!e[s])))};return(0,n.jsxs)(m.W_,{name:"answer-".concat(s),className:"row",children:[(0,n.jsx)("div",{className:"col-lg-8 col-xl-8",children:eE[s]||eq[s]?(0,n.jsxs)("button",{className:"btn btn-light btn-sm mt-4 mb-2",style:{visibility:"hidden"},type:"button",children:[(0,n.jsx)("i",{className:"fe fe-square m-2"}),"Stop Generating [Esc]"]}):(0,n.jsxs)("button",{className:"btn btn-light btn-sm mt-4 mb-2",onClick:()=>{b.n.track("Stop Generating",{question:l}),e4()},type:"button",children:[(0,n.jsx)("i",{className:"fe fe-square m-2"}),"Stop Generating [Esc]"]})}),(0,n.jsx)("div",{className:"col-lg-8 col-xl-8",children:(0,n.jsxs)("div",{className:"mb-0",children:[!sr[s]&&s>0&&(0,n.jsx)(I.Z,{message:"Edit Question",children:(0,n.jsx)("span",{className:l!==w?"fs-5 mb-3 font-monospace":"fw-bold fs-3 mb-3",style:{whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"pointer"},onClick:()=>{eE[s]&&(b.n.track("Click Edit Question",{question:l,searchQuery:o,answerIndex:s}),so(e=>(0,p.N6)(e,s,!e[s])))},children:J?l:w})}),sr[s]&&(0,n.jsx)("div",{onBlur:()=>{setTimeout(()=>{so(e=>(0,p.N6)(e,s,!1))},100)},children:(0,n.jsx)(x.Z,{placeholder:"Edit your question.",initialQuestionFromCache:l,initialContext:d,defaultNumRowsToShow:1,customSearchHandler:(e,t)=>{e7(e,t,s,!0,s),so(e=>(0,p.N6)(e,s,!1))},answerModel:ew,maxTokenLimit:eC})}),!sc[s]&&s>0&&l!==w?(0,n.jsx)(I.Z,{message:"Show Full Question",children:(0,n.jsx)("i",{className:J?"fe fe-chevron-up":"fe fe-chevron-down",onClick:()=>{V(!J)}})}):null]})}),!ez&&!e0&&(0,n.jsx)("div",{className:"col-lg-4 col-xl-4",children:(0,n.jsxs)("div",{className:ez||e1||e0?"container-xl web-container p-0 ms-0":"container-xl web-container p-0 me-0",children:[!sc[s]&&s>0&&(!o&&s>0?K:!o.includes(l)&&(0,n.jsx)(I.Z,{message:"Edit Query",children:(0,n.jsx)("span",{className:"fw-bold fs-3 mb-3",style:{whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"pointer"},onClick:f,children:o})})),sc[s]&&(0,n.jsx)("div",{onBlur:()=>{si(e=>(0,p.N6)(e,s,!1))},children:(0,n.jsx)(x.Z,{placeholder:"Edit search query",initialContext:"",initialQuestionFromCache:o,defaultNumRowsToShow:1,answerModel:ew,customSearchHandler:(e,t)=>{st(s,l,d,e),si(e=>(0,p.N6)(e,s,!1))}})})]})}),!se&&(0,n.jsxs)("div",{className:"col-lg-8 col-xl-8",children:[(0,n.jsx)(Z,{question:l,answer:r,waitingForStreamStart:eq[s],searchResults:a,doneStreaming:eE[s],metadata:i}),h&&!eq[s]&&eE[s]&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mb-4",children:[eQ&&(0,n.jsx)(Q,{sendFeedback:e=>{let t=es[s].previousAnswers.slice(-1)[0];e3({regenerate:e,previousAnswer:t,answer:r},"Regenerate Feedback"),eU(!1)}}),(0,n.jsx)($,{regenerateAnswer:e8,answerIndex:s,requestsLeftForGPT4:ep,session:G}),(null===eL||!0===eL)&&(0,n.jsx)(I.Z,{message:"Good answer",placement:"top",children:(0,n.jsx)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>{null===eL&&(e3({helpful:!0}),eR(!0),e_(!0))},type:"button",children:(0,n.jsx)("i",{className:"fe fe-thumbs-up m-2"})})}),(null===eL||!1===eL)&&(0,n.jsx)(I.Z,{message:"Bad answer",placement:"top",children:(0,n.jsx)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>{null===eL&&(e3({helpful:!1}),eR(!1),e_(!0))},type:"button",children:(0,n.jsx)("i",{className:"fe fe-thumbs-down m-2"})})}),(0,n.jsx)(I.Z,{message:"Copy answer",placement:"top",children:(0,n.jsx)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>sn(s),type:"button",children:eB[s]?(0,n.jsx)("i",{className:"fe fe-check text-success mx-2"}):(0,n.jsx)("i",{className:"fe fe-copy mx-2"})})}),(0,n.jsx)("button",{type:"button",className:"btn btn-light btn-sm dropdown dropdown-toggle m-1","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,n.jsx)("i",{className:"fe fe-edit m-2"})}),(0,n.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,n.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" modify "}),(0,n.jsxs)("li",{children:[(0,n.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{m.OK.scrollTo("answer-".concat(s),{duration:400,delay:0,smooth:"easeInOutQuart"}),so(e=>(0,p.N6)(e,s,!0))},children:[(0,n.jsx)("i",{className:"fe fe-edit m-1"}),"Edit Question"]}),(0,n.jsxs)("button",{className:"dropdown-item",type:"button",onClick:e2,children:[(0,n.jsx)("i",{className:"fe fe-trash m-1"}),"Delete Answer"]})]})]}),(0,n.jsx)(U.Z,{question:eo,lastAnswer:r,conversationContent:es.map(e=>"## ".concat(e.question,"\n").concat(e.answer)).join("\n\n")})]}),ea<=k.Ni&&(0,n.jsx)("div",{className:"fixed-bottom bg-gradient-light",style:{pointerEvents:"none"},children:(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col-xl-12",style:{pointerEvents:"auto"},children:(0,n.jsx)("div",{className:"container-xl search-container p-4",children:(0,n.jsx)("div",{className:"col-lg-8",children:(0,n.jsx)(x.Z,{placeholder:"Ask a followup question",initialQuestionFromCache:"",initialContext:"",defaultNumRowsToShow:1,customSearchHandler:(e,s)=>e7(e,s),answerModel:ew,maxTokenLimit:eC})})})})})}),(0,n.jsx)(H,{suggestedFollowups:en,customSearchHandler:e7})]})]}),(0,n.jsxs)("div",{className:se?"col-lg-8 col-xl-7":"col-lg-4 col-xl-4",children:[(0,n.jsx)("div",{className:ez||e1||e0?"container-xl web-container p-0 ms-0":"container-xl web-container p-0 me-0",children:(0,n.jsx)(F,{customLinks:c,openLinksInNewTab:!0,searchResults:a,loading:eM[s],beginEditQuery:f})}),(0,n.jsx)("div",{className:"container-xl search-container mt-4 align-items-end"})]})]},u)}),(0,n.jsx)("div",{className:"mt-14"})]})]}):null}J.defaultProps={phindPlan:"Phind Free",paidPlanValid:!1,anonUserId:"",cachedAnswerHistory:[],cachedSuggestedFollowupQuestions:[]};var V=!0,z=J}},function(e){e.O(0,[48,419,74,721,17,870,354,183,68,147,687,774,888,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);